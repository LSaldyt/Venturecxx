# Copyright (c) 2014 MIT Probabilistic Computing Project.
#
# This file is part of Venture.
#
# Venture is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Venture is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Venture.  If not, see <http://www.gnu.org/licenses/>.

## Tests for Venturemagics2.py (IPython Form)

from venture.venturemagics.venturemagics import *

# output of directive is first arg of %v output
a,_ = %v [predict (+ 1.0 2.0)]
assert(a==3.0)

# ripl should persist 
%v [assume x1 1.0]
b,_ = %v [predict x1]
assert(b==1.0)

# ripl can be directly called
ipy_ripl.infer(10)
ipy_ripl.assume('x5','(beta 1 1)')
assert(True==ipy_ripl.predict('true'))
assert(ipy_ripl.predict('x5')>0)

# print '3ipy, before cell'
# ## test cell magic
# cell='''
# %%v
# [assume cellx 10.0]
# [predict cellx]'''

# ip = get_ipython()
# ip.run_cell(cell)

# assert(ipy_ripl.predict('cellx')==10.0)


